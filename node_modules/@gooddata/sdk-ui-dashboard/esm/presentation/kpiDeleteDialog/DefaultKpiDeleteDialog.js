// (C) 2022 GoodData Corporation
import React, { useCallback } from "react";
import { ConfirmDialog, Typography } from "@gooddata/sdk-ui-kit";
import { FormattedMessage, useIntl } from "react-intl";
import { dispatchAndWaitFor, eagerRemoveSectionItem, selectIsKpiDeleteDialogOpen, selectKpiDeleteDialogWidgetCoordinates, uiActions, useDashboardDispatch, useDashboardSelector, } from "../../model";
/**
 * @internal
 */
export function useKpiDeleteDialogProps() {
    var dispatch = useDashboardDispatch();
    var coordinates = useDashboardSelector(selectKpiDeleteDialogWidgetCoordinates);
    var onCancel = useCallback(function () { return dispatch(uiActions.closeKpiDeleteDialog()); }, [dispatch]);
    var onDelete = useCallback(function () {
        return dispatchAndWaitFor(dispatch, eagerRemoveSectionItem(coordinates.sectionIndex, coordinates.itemIndex)).finally(function () {
            dispatch(uiActions.closeKpiDeleteDialog());
        });
    }, [coordinates, dispatch]);
    var isVisible = useDashboardSelector(selectIsKpiDeleteDialogOpen);
    return {
        isVisible: isVisible,
        onCancel: onCancel,
        onDelete: onDelete,
    };
}
/**
 * @internal
 */
export var DefaultKpiDeleteDialog = function (props) {
    var isVisible = props.isVisible, onDelete = props.onDelete, onCancel = props.onCancel;
    var intl = useIntl();
    if (!isVisible) {
        return null;
    }
    return (React.createElement(ConfirmDialog, { onCancel: onCancel, onSubmit: onDelete, isPositive: false, className: "s-dialog", headline: intl.formatMessage({ id: "deleteKpiConfirmationDialog.headline" }), cancelButtonText: intl.formatMessage({ id: "cancel" }), submitButtonText: intl.formatMessage({ id: "deleteKpiConfirmationDialog.submitButtonText" }) },
        React.createElement(Typography, { tagName: "p" },
            React.createElement(FormattedMessage, { id: "deleteKpiConfirmationDialog.message" }))));
};
//# sourceMappingURL=DefaultKpiDeleteDialog.js.map
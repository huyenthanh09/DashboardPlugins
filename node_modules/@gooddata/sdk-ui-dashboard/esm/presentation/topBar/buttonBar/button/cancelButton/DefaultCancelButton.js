// (C) 2021-2022 GoodData Corporation
import React, { useCallback } from "react";
import { useIntl } from "react-intl";
import { Button } from "@gooddata/sdk-ui-kit";
import { cancelEditRenderMode, selectIsDashboardDirty, selectIsDashboardSaving, selectIsInEditMode, uiActions, useDashboardDispatch, useDashboardSelector, } from "../../../../../model";
/**
 * @internal
 */
export function useCancelButtonProps() {
    var dispatch = useDashboardDispatch();
    var isEditing = useDashboardSelector(selectIsInEditMode);
    var isSaving = useDashboardSelector(selectIsDashboardSaving);
    var isDirty = useDashboardSelector(selectIsDashboardDirty);
    var onCancelClick = useCallback(function () {
        if (isDirty) {
            dispatch(uiActions.openCancelEditModeDialog());
        }
        else {
            dispatch(cancelEditRenderMode());
        }
    }, [dispatch, isDirty]);
    return {
        isVisible: isEditing && !isSaving,
        onCancelClick: onCancelClick,
    };
}
/**
 * @internal
 */
export function DefaultCancelButton(_a) {
    var isVisible = _a.isVisible, onCancelClick = _a.onCancelClick;
    var intl = useIntl();
    if (!isVisible) {
        return null;
    }
    return (React.createElement(Button, { className: "gd-button-secondary cancel-button s-cancel_button", value: intl.formatMessage({ id: "cancel" }), onClick: onCancelClick }));
}
//# sourceMappingURL=DefaultCancelButton.js.map